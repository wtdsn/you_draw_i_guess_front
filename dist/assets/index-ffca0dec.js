var C=Object.defineProperty;var N=(t,e,a)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var h=(t,e,a)=>(N(t,typeof e!="symbol"?e+"":e,a),a);import{d as S,o as I,a as B,r as c,b as w,c as q,u as R,_ as T,e as O,f as s,w as P,v as j,g as V,h as g,n as F,p as J,i as U,j as A}from"./index-7422cff0.js";import{d as E,t as H,q as z}from"./index.esm-85d5b779.js";const D="/assets/a-6f3bf0a2.png",K=S({__name:"PenPath",setup(t){I(()=>{window.addEventListener("resize",p),i(),r()}),B(()=>{window.removeEventListener("resize",p)});const e=c(),a=c();function i(){a.value=e.value.getContext("2d"),p()}let n=c(0),d=c(0),p=E(100,()=>{let l=document.querySelector("body");n.value=l.offsetWidth,d.value=l.offsetHeight,e.value.width=n.value,e.value.height=d.value,a.value.strokeStyle="#0047ee",a.value.lineWidth=8,a.value.lineJoin="bevel"},!1);function r(){requestAnimationFrame(()=>{a.value.clearRect(0,0,n.value,d.value),f.value=f.value.filter(l=>l.draw()),r()})}class y{constructor(o,v,x,k){h(this,"opacity");this.x1=o,this.y1=v,this.x2=x,this.y2=k,this.opacity=1}draw(){if(this.opacity<=0)return!1;let o=a.value;return o.beginPath(),o.moveTo(this.x1,this.y1),o.lineTo(this.x2,this.y2),o.globalAlpha=this.opacity,this.opacity-=.01,o.closePath(),o.stroke(),!0}}const f=c([]);let u=c(void 0),_=H(20,l=>{let{pageX:o,pageY:v}=l;if(!u.value)u.value=[o,v];else{let x=new y(...u.value,o,v);u.value=[o,v],f.value.push(x)}});return(l,o)=>(w(),q("canvas",{id:"penPath",ref_key:"canvas",ref:e,onMousemove:o[0]||(o[0]=(...v)=>R(_)&&R(_)(...v))},null,544))}});const M=T(K,[["__scopeId","data-v-21f2e142"]]);class G{constructor(e={}){h(this,"beforeRequest");h(this,"afterResponse");this.config=e}request(e){e=L(e,this.config),this.beforeRequest&&(e=this.beforeRequest(e));const{url:a,init:i}=W(e);return fetch(a,i).then(n=>{const{statusText:d,status:p}=n;return d==="OK"?n.json().then(r=>({statusText:"OK",status:p,data:r})):n.text().then(r=>({statusText:d,status:p,data:r}))}).then(n=>{if(n.statusText==="OK"){if(this.afterResponse&&this.afterResponse[0])return this.afterResponse[0](n)}else if(this.afterResponse&&this.afterResponse[1])return this.afterResponse[1](n);return n})}}function L(t,e){return{...e||{},...t||{},headers:{...e.headers||{},...t.headers||{}}}}function W(t){let e=((t==null?void 0:t.baseUrl)||"")+t.url;t.query&&(e=z.setQuery(e,t.query));const a={method:t.method||"GET",headers:t.headers||{}};return a.method==="POST"&&t.data&&(t.data instanceof FormData?a.body=t.data:t.data instanceof Object?(a.headers["Content-Type"]="application/json",a.body=JSON.stringify(t.data)):a.body=t.data),{url:e,init:a}}function Y(t={}){const e=new G(t),a=e.request.bind(e);return a.setBeforeRequest=function(i){e.beforeRequest=i},a.setAfterResponsse=function(i,n){e.afterResponse=[i,n]},a}const Q="http://localhost:9527",m=Y({baseUrl:Q});m.setBeforeRequest(t=>t);m.setAfterResponsse(t=>t.data,t=>{});function X(t){return m({url:"/entry/create",method:"POST",data:{name:t}})}function $(t,e){return m({url:"/entry/joinByNumber",method:"POST",data:{name:t,roomNumber:e}})}const b=t=>(J("data-v-1f419a70"),t=t(),U(),t),Z={class:"enrty_con"},ee={class:"entry_form_con"},te=b(()=>s("div",{class:"head"},[s("span",null,"You"),s("span",null,"Draw"),s("span",null,"I"),s("span",null,"Guess")],-1)),ae={class:"form"},se={class:"name"},ne=b(()=>s("img",{src:D,alt:""},null,-1)),oe=b(()=>s("label",{class:"",for:"name"}," 昵称： ",-1)),re=b(()=>s("div",{class:"btn join_random"},"随机加入",-1)),ue={key:0,class:"join_dialog_shadow"},le={class:"dialog_wrapper"},ie={class:"join_number_inputer"},ce=g('<label for="numberInput" data-v-1f419a70><span data-v-1f419a70> 请输入房间号：</span><span class="number_place" data-v-1f419a70></span><span class="number_place" data-v-1f419a70></span><span class="number_place" data-v-1f419a70></span><span class="number_place" data-v-1f419a70></span><span class="number_place" data-v-1f419a70></span><span class="number_place" data-v-1f419a70></span></label><span class="cover" data-v-1f419a70></span>',2),de=S({__name:"index",setup(t){const e=c("123"),a=A();async function i(){if(!e.value||!e.value.trim()){alert("请输入昵称");return}const u=await X(e.value);if(u.code===0){alert(u.msg);return}else a.push({name:"index",query:{roomNumber:u.data,name:e.value}})}const n=c(!1);function d(){n.value=!0,F(()=>{document.querySelector("#numberInput").focus()})}function p(){n.value=!1}const r=c();function y(){r.value=r.value.replace(/[^0-9]/,"")}async function f(){(!e.value||!r.value)&&alert("昵称和房间号不能未空");const u=await $(e.value,r.value);if(u.code)a.push({name:"index",query:{roomNumber:r.value,name:e.value}});else{alert(u.msg);return}}return(u,_)=>(w(),q("div",Z,[O(M),s("div",ee,[te,s("div",ae,[s("div",se,[ne,oe,P(s("input",{type:"text",name:"",id:"name","onUpdate:modelValue":_[0]||(_[0]=l=>e.value=l)},null,512),[[j,e.value]])]),s("div",{class:"ops"},[s("div",{class:"btn create",onClick:i},"创建房间"),s("div",{class:"btn join",onClick:d},"加入房间"),re])])]),n.value?(w(),q("div",ue,[s("div",le,[s("div",ie,[ce,P(s("input",{type:"text",id:"numberInput",maxlength:"6","onUpdate:modelValue":_[1]||(_[1]=l=>r.value=l),onInput:y},null,544),[[j,r.value]])]),s("div",{class:"bts"},[s("div",{class:"btn confirm_join",onClick:f},"加入"),s("div",{class:"btn cancle",onClick:p},"取消")])])])):V("",!0)]))}});const fe=T(de,[["__scopeId","data-v-1f419a70"]]);export{fe as default};
